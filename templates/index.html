{% extends 'base.html' %}
{% load static %}
{% block content %}
    <main class="main-container">
        <section class="content-container">
            <div class="content">   

                <div class="posts">
                    {% for post in post_items %}
                    <article class="post">
                        <div class="post__header">
                            
                                <div class="post__profile">
                                    {% if post.user.profile.image %}
                                    <a href="{{post.user.profile.image.url}}" class="post__avatar">
                                        
                                        <img src="{{post.user.profile.image.url}}" alt="User Picture">
                                        
                                    </a>
                                    {% endif %}
                                    <a href="{{post.user.username}}" class="post__user">{{ post.user.username }}</a>
                                    
                                </div>
                            
                            <button class="post__more-options">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <circle cx="6.5" cy="11.5" r="1.5" fill="var(--text-dark)"/>
                                    <circle cx="12" cy="11.5" r="1.5" fill="var(--text-dark)"/>
                                    <circle cx="17.5" cy="11.5" r="1.5" fill="var(--text-dark)"/>
                                </svg>
                            </button>
                        </div>

                        <div class="post__content">
                            <div class="post__medias">
                                <a href="{% url 'post-details' post.id %}"><img class="post__media" src="{{ post.picture.url }}" alt="Post Content" style="width: 700px; height: 348px; object-fit: cover;"></a>
<!--                                <img class="post__media" src="{% static 'assets1/insta-clone.png' %}" alt="Post Content">-->
<!--                                <img class="post__media" src="{% static 'assets1/insta-clone.png' %}" alt="Post Content">-->
                            </div>
                        </div>

                        <div class="post__footer">
                            <div class="post__buttons">

                                <a href="{% url 'like' post.id %}" class="post__button">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" style = "color:blue;" fill="currentColor" class="bi bi-star-half" viewBox="0 0 16 16">
                                        <path d="M5.354 5.119 7.538.792A.516.516 0 0 1 8 .5c.183 0 .366.097.465.292l2.184 4.327 4.898.696A.537.537 0 0 1 16 6.32a.548.548 0 0 1-.17.445l-3.523 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256a.52.52 0 0 1-.146.05c-.342.06-.668-.254-.6-.642l.83-4.73L.173 6.765a.55.55 0 0 1-.172-.403.58.58 0 0 1 .085-.302.513.513 0 0 1 .37-.245l4.898-.696zM8 12.027a.5.5 0 0 1 .232.056l3.686 1.894-.694-3.957a.565.565 0 0 1 .162-.505l2.907-2.77-4.052-.576a.525.525 0 0 1-.393-.288L8.001 2.223 8 2.226v9.8z"/>
                                      </svg>
                                </a>
                                <a href="{% url 'post-details' post.id %}" class="post__button">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" style="color:blue;" fill="currentColor" class="bi bi-chat-heart" viewBox="0 0 16 16">
                                        <path fill-rule="evenodd" d="M2.965 12.695a1 1 0 0 0-.287-.801C1.618 10.83 1 9.468 1 8c0-3.192 3.004-6 7-6s7 2.808 7 6c0 3.193-3.004 6-7 6a8.06 8.06 0 0 1-2.088-.272 1 1 0 0 0-.711.074c-.387.196-1.24.57-2.634.893a10.97 10.97 0 0 0 .398-2Zm-.8 3.108.02-.004c1.83-.363 2.948-.842 3.468-1.105A9.06 9.06 0 0 0 8 15c4.418 0 8-3.134 8-7s-3.582-7-8-7-8 3.134-8 7c0 1.76.743 3.37 1.97 4.6a10.437 10.437 0 0 1-.524 2.318l-.003.011a10.722 10.722 0 0 1-.244.637c-.079.186.074.394.273.362a21.673 21.673 0 0 0 .693-.125ZM8 5.993c1.664-1.711 5.825 1.283 0 5.132-5.825-3.85-1.664-6.843 0-5.132Z"/>
                                      </svg>
                                </a>
                                <a href="{% url 'directs' post.user.username %}" class="post__button">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" style="color:blue;" fill="currentColor" class="bi bi-chat-dots" viewBox="0 0 16 16">
                                        <path d="M5 8a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm4 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm3 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"/>
                                        <path d="m2.165 15.803.02-.004c1.83-.363 2.948-.842 3.468-1.105A9.06 9.06 0 0 0 8 15c4.418 0 8-3.134 8-7s-3.582-7-8-7-8 3.134-8 7c0 1.76.743 3.37 1.97 4.6a10.437 10.437 0 0 1-.524 2.318l-.003.011a10.722 10.722 0 0 1-.244.637c-.079.186.074.394.273.362a21.673 21.673 0 0 0 .693-.125zm.8-3.108a1 1 0 0 0-.287-.801C1.618 10.83 1 9.468 1 8c0-3.192 3.004-6 7-6s7 2.808 7 6c0 3.193-3.004 6-7 6a8.06 8.06 0 0 1-2.088-.272 1 1 0 0 0-.711.074c-.387.196-1.24.57-2.634.893a10.97 10.97 0 0 0 .398-2z"/>
                                      </svg>
                                </a>

                                

                                <a href="{% url 'favourite' post.id %}"  class="post__button">
                                    <svg width="30" height="30" style="color:blue;" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M19.875 2H4.125C3.50625 2 3 2.44939 3 3.00481V22.4648C3 23.0202 3.36563 23.1616 3.82125 22.7728L11.5444 16.1986C11.7244 16.0471 12.0225 16.0471 12.2025 16.1936L20.1731 22.7879C20.6287 23.1666 21 23.0202 21 22.4648V3.00481C21 2.44939 20.4994 2 19.875 2ZM19.3125 20.0209L13.3444 15.0827C12.9281 14.7394 12.405 14.5677 11.8763 14.5677C11.3363 14.5677 10.8019 14.7444 10.3856 15.0979L4.6875 19.9502V3.51479H19.3125V20.0209Z" fill="var(--text-dark)" stroke="var(--text-dark)" stroke-width="0.7"/>
                                    </svg>
                                </a>
                            </div>

                            <div class="post__infos">
                                <div class="post__likes">
                                    <span>{{post.likes}} <a class="post__name--underline" href="#"> Likes</a></span>
                                </div>

                                <div class="post__description">
                                    <span>
                                        <a class="post__name--underline" href="#"><b>@{{post.user.username}}</b></a><br/><br/>
                                        <b>Description :</b> {{post.caption}}

                                    </span>
<!--                                    {{post.caption}}-->
                                </div>
                                <p style="font-size: 13px;"><b>Tags : </b>{% for tag in post.tags.all %}
                                    <a href="{{ tag.get_absolute_url }}" style="text-decoration: none;">
                                        #{{ tag }}
                                    </a>
                                    {% endfor %}
                                </p>
                                <span class="post__date-time">{{post.posted}}</span>
                            </div>
                        </div>
                    </article>
                    {% endfor %}
                    
                </div>
            </div>

            <section class="side-menu">
                <div class="side-menu__user-profile">
                    <a href="{{request.user.username}}" target="_blank" class="side-menu__user-avatar">
                        <img src="{{ request.user.profile.image.url }}" alt="User Picture">
                    </a>
                    <div class="side-menu__user-info">
                        {% if user.profile.first_name %}
                        <a href="{{request.user.username}}">{{request.user.profile.first_name|title }} {{request.user.profile.last_name|title }}</a>
                        {% else %}
                        <a href="{{request.user.username}}">{{user.username}}</a>
                        {% endif %}
                        <span>@{{request.user.username}}</span>
                    </div>
                    <a class="side-menu__user-button"><button class="btn btn-secondary btn-sm" type="submit">View Profile</button></a></a>
                </div>

                <div class="side-menu__suggestions-section">
                    <div class="side-menu__suggestions-header">
                        <h2>Suggestions for You</h2>
                        <button>See All</button>
                    </div>
                    <div class="side-menu__suggestions-content">
                        {% for user in all_users %}
                            {% if request.user.username != user.username %}
                            <div class="side-menu__suggestion">
                                <a href="{% url 'profile' user %}" class="side-menu__suggestion-avatar">
                                    <img src="{{user.profile.image.url}}" alt="User Picture">
                                </a>
                                
                                <div class="side-menu__suggestion-info">
                                    {% if user.profile.first_name %}
                                    <a href="{% url 'profile' user %}">{{user.profile.first_name|title}} {{user.profile.last_name|title}}</a>
                                    {% else %}
                                    <a href="{% url 'profile' user %}">{{user.username}}</a>
                                    {% endif %}
                                    <span>@{{user.username}}</span>
                                </div>

                                {% if follow_status == True %}
                                <a href="{% url 'follow' user 0 %}" class="side-menu__suggestion-button">
                                    <button class="btn btn-secondary btn-sm" type="submit">Follow</button></a>
                                {% else %}
                                <a href="{% url 'follow' user 1 %}" class="side-menu__suggestion-button">
                                    <button class="btn btn-primary btn-sm" type="submit">Follow</button>
                                </a>
                                {% endif %}
                            </div>
                            {% endif %}
                        {% endfor %}
                        
                    </div>
                </div>
            </section>
{% endblock content %}